{% extends 'plantillaBase.html' %}
	
	{% if mensaje %}
		<script>
			alert('{{ mensaje}}');
			alert('{{ dato }}');
		</script>
	{% endif %}

	{% if mensaje %}
	<script>
		alert('{{ mensaje}}');
	</script>
	{% endif %}

	{% block titulo %}
    <h1 class="titulo_principal">Registrar  Usuario</h1>
    {% endblock titulo %}

{% block contenido %}

	<!DOCTYPE html>
<html>
<body>

	<div class="formulario">
	  <form action="/action_page.php">
		{% csrf_token %}

		<label for="">E-mail:</label>
			<div class="row">
			    <input type="email" class="col-sm-6" name="email">
			</div>

	    <label for="">Contrase√±a:</label>
			<div class="row">
				<input type="password" class="col-sm-6" name="password">
			</div>

		<label for="">Nombre: </label>
			<div class="row">		
				<input type="text" class="col-sm-6" name="nombre">
			</div>

	    <label for="">Imagen</label>
			<div class="row">
				<input  name="file[]" class="col-sm-4"  type="file" id="comidaimagen" required>
				<input name="url" type="hidden"  id="url">
			</div>

		<label for="">Rol: </label>
			<div class="row">
				<input type="text" class="col-sm-6" name="rol">
			</div>
		<input type="submit" class="btn" onclick="uploadimage()" value="Cargar imagen">
		<input type="submit" value="Agregar Usuario">

	  </form>
	</div>






</body>
 
<script src="https://www.gstatic.com/firebasejs/5.5.6/firebase.js"></script>
<script>
    // Initialize Firebase
    // TODO: Replace with your project's customized code snippet
    var config = {
    apiKey: "AIzaSyD4rA3-ZMXJkiQwJdhQeFmYMicCe1pyfPc",
    authDomain: "tipico-saludable-50fb7.firebaseapp.com",
    databaseURL: "https://tipico-saludable-50fb7.firebaseio.com",
    projectId: "tipico-saludable-50fb7",
    storageBucket: "tipico-saludable-50fb7.appspot.com",
    messagingSenderId: "159019297528"
  };
    firebase.initializeApp(config);

  function uploadimage(){
  var storage = firebase.storage();
  var file = document.getElementById("file").files[0];
  var storageRef = storage.ref();
  var thisref = storageRef.child(file.name).put(file);
  thisref.on('state_changed',function(snapshot){
  console.log("Imagen guardada");
  },
  function(error) {
  },
  function() {
  thisref.snapshot.ref.getDownloadURL().then(function(downloadURL) {
   console.log('got url3', downloadURL);
  document.getElementById("url3").value = downloadURL;
  console.log(document.getElementById("url3")," foto");
  alert("Imagen guardada");
  });
});
}
</script>
</html>
	{% endblock contenido %}